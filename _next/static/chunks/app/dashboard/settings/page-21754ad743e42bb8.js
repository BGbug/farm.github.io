(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{22346:(e,a,s)=>{"use strict";s.d(a,{w:()=>i});var t=s(95155),r=s(12115),l=s(87489),n=s(59434);let i=r.forwardRef((e,a)=>{let{className:s,orientation:r="horizontal",decorative:i=!0,...d}=e;return(0,t.jsx)(l.b,{ref:a,decorative:i,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...d})});i.displayName=l.b.displayName},26126:(e,a,s)=>{"use strict";s.d(a,{E:()=>i});var t=s(95155);s(12115);var r=s(74466),l=s(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:s}),a),...r})}},38817:(e,a,s)=>{"use strict";s.d(a,{G:()=>t});let t=JSON.parse('{"o":[{"id":"logo","description":"FarmFlow application logo","imageUrl":"https://images.unsplash.com/photo-1693666731851-993c9e760781?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw0fHxsZWFmJTIwbG9nb3xlbnwwfHx8fDE3NTkzOTY0ODJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"leaf logo"},{"id":"avatar-1","description":"User avatar for Alice","imageUrl":"https://images.unsplash.com/photo-1582563556319-381ad4504ed9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHx3b21hbiUyMGZhcm1lcnxlbnwwfHx8fDE3NTk0NzE0NjV8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"woman farmer"},{"id":"avatar-2","description":"User avatar for Bob","imageUrl":"https://images.unsplash.com/photo-1628492058844-589eb5dc6a35?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw4fHxtYW4lMjBmYXJtZXJ8ZW58MHx8fHwxNzU5Mzk1MDQxfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"man farmer"},{"id":"avatar-3","description":"User avatar for Charlie","imageUrl":"https://images.unsplash.com/photo-1740477138822-906f6b845579?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw4fHxmYXJtZXIlMjBwb3J0cmFpdHxlbnwwfHx8fDE3NTk0NjQzNTh8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"farmer portrait"},{"id":"map-placeholder","description":"Placeholder for a geolocation map of farm fields","imageUrl":"https://images.unsplash.com/photo-1545292470-391a7b77b8a2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxmYXJtJTIwYWVyaWFsfGVufDB8fHx8MTc1OTQ4NTk1Nnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"farm aerial"}]}').o},40448:(e,a,s)=>{Promise.resolve().then(s.bind(s,82217))},44838:(e,a,s)=>{"use strict";s.d(a,{SQ:()=>h,_2:()=>p,lp:()=>u,mB:()=>x,rI:()=>c,ty:()=>m});var t=s(95155),r=s(12115),l=s(76215),n=s(73158),i=s(10518),d=s(70154),o=s(59434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,a)=>{let{className:s,inset:r,children:i,...d}=e;return(0,t.jsxs)(l.ZP,{ref:a,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...d,children:[i,(0,t.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.G5,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=l.G5.displayName;let h=r.forwardRef((e,a)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsx)(l.UC,{ref:a,sideOffset:r,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});h.displayName=l.UC.displayName;let p=r.forwardRef((e,a)=>{let{className:s,inset:r,...n}=e;return(0,t.jsx)(l.q7,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});p.displayName=l.q7.displayName,r.forwardRef((e,a)=>{let{className:s,children:r,checked:n,...d}=e;return(0,t.jsxs)(l.H_,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,a)=>{let{className:s,children:r,...n}=e;return(0,t.jsxs)(l.hN,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let u=r.forwardRef((e,a)=>{let{className:s,inset:r,...n}=e;return(0,t.jsx)(l.JU,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})});u.displayName=l.JU.displayName;let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});x.displayName=l.wv.displayName},45481:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},65064:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},82217:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>ef});var t=s(95155),r=s(12115),l=s(66695),n=s(85127),i=s(26126),d=s(30285),o=s(44838),c=s(91394),m=s(34301),h=s(40157);let p=(0,h.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var u=s(65064);let x=(0,h.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),f=(0,h.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var j=s(88390);let g=(0,h.A)("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var y=s(45481),v=s(38817),N=s(62523),b=s(85057),w=s(54165),A=s(59409),k=s(87481),R=s(34953),C=s(83013),D=s(32027),H=s(46081),F=s(6101),S=s(45821),M=s(85185);r.forwardRef((e,a)=>{let{children:s,...l}=e,n=r.Children.toArray(s),i=n.find(U);if(i){let e=i.props.children,s=n.map(a=>a!==i?a:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(E,{...l,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,t.jsx)(E,{...l,ref:a,children:s})}).displayName="Slot";var E=r.forwardRef((e,a)=>{let{children:s,...t}=e;if(r.isValidElement(s)){let e=function(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?e.ref:(s=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s),l=function(e,a){let s={...a};for(let t in a){let r=e[t],l=a[t];/^on[A-Z]/.test(t)?r&&l?s[t]=(...e)=>{l(...e),r(...e)}:r&&(s[t]=r):"style"===t?s[t]={...r,...l}:"className"===t&&(s[t]=[r,l].filter(Boolean).join(" "))}return{...e,...s}}(t,s.props);return s.type!==r.Fragment&&(l.ref=a?(0,F.t)(a,e):e),r.cloneElement(s,l)}return r.Children.count(s)>1?r.Children.only(null):null});E.displayName="SlotClone";var J=({children:e})=>(0,t.jsx)(t.Fragment,{children:e});function U(e){return r.isValidElement(e)&&e.type===J}var I="AlertDialog",[B,O]=(0,H.A)(I,[S.Hs]),P=(0,S.Hs)(),z=e=>{let{__scopeAlertDialog:a,...s}=e,r=P(a);return(0,t.jsx)(S.bL,{...r,...s,modal:!0})};z.displayName=I;var T=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=P(s);return(0,t.jsx)(S.l9,{...l,...r,ref:a})});T.displayName="AlertDialogTrigger";var V=e=>{let{__scopeAlertDialog:a,...s}=e,r=P(a);return(0,t.jsx)(S.ZL,{...r,...s})};V.displayName="AlertDialogPortal";var _=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=P(s);return(0,t.jsx)(S.hJ,{...l,...r,ref:a})});_.displayName="AlertDialogOverlay";var Z="AlertDialogContent",[G,q]=B(Z),L=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,children:l,...n}=e,i=P(s),d=r.useRef(null),o=(0,F.s)(a,d),c=r.useRef(null);return(0,t.jsx)(S.G$,{contentName:Z,titleName:Y,docsSlug:"alert-dialog",children:(0,t.jsx)(G,{scope:s,cancelRef:c,children:(0,t.jsxs)(S.UC,{role:"alertdialog",...i,...n,ref:o,onOpenAutoFocus:(0,M.m)(n.onOpenAutoFocus,e=>{var a;e.preventDefault(),null==(a=c.current)||a.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(J,{children:l}),(0,t.jsx)(ea,{contentRef:d})]})})})});L.displayName=Z;var Y="AlertDialogTitle",W=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=P(s);return(0,t.jsx)(S.hE,{...l,...r,ref:a})});W.displayName=Y;var $="AlertDialogDescription",K=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=P(s);return(0,t.jsx)(S.VY,{...l,...r,ref:a})});K.displayName=$;var X=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=P(s);return(0,t.jsx)(S.bm,{...l,...r,ref:a})});X.displayName="AlertDialogAction";var Q="AlertDialogCancel",ee=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,{cancelRef:l}=q(Q,s),n=P(s),i=(0,F.s)(a,l);return(0,t.jsx)(S.bm,{...n,...r,ref:i})});ee.displayName=Q;var ea=e=>{let{contentRef:a}=e,s="`".concat(Z,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(Z,"` by passing a `").concat($,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(Z,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return r.useEffect(()=>{var e;document.getElementById(null==(e=a.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},es=s(59434);let et=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(_,{className:(0,es.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:a})});et.displayName=_.displayName;let er=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsxs)(V,{children:[(0,t.jsx)(et,{}),(0,t.jsx)(L,{ref:a,className:(0,es.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});er.displayName=L.displayName;let el=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,es.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};el.displayName="AlertDialogHeader";let en=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,es.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};en.displayName="AlertDialogFooter";let ei=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(W,{ref:a,className:(0,es.cn)("text-lg font-semibold",s),...r})});ei.displayName=W.displayName;let ed=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(K,{ref:a,className:(0,es.cn)("text-sm text-muted-foreground",s),...r})});ed.displayName=K.displayName;let eo=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(X,{ref:a,className:(0,es.cn)((0,d.r)(),s),...r})});eo.displayName=X.displayName;let ec=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ee,{ref:a,className:(0,es.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});ec.displayName=ee.displayName;var em=s(22346);let eh=e=>fetch(e).then(e=>e.json()),ep=e=>v.G.find(a=>a.id===e),eu=[{code:"IN",name:"India"},{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"}],ex=[{code:"INR",name:"Indian Rupee (â‚¹)"},{code:"USD",name:"United States Dollar ($)"},{code:"CAD",name:"Canadian Dollar (C$)"},{code:"GBP",name:"British Pound (\xa3)"},{code:"AUD",name:"Australian Dollar (A$)"}];function ef(){let{toast:e}=(0,k.dj)(),{data:a=[],error:s,mutate:h}=(0,R.Ay)("/api/users",eh),{data:v=[],error:H,mutate:F}=(0,R.Ay)("/api/backup-history",eh),[S,M]=(0,r.useState)(null),[E,J]=(0,r.useState)(!1),[U,I]=(0,r.useState)(!1),[B,O]=(0,r.useState)({name:"",username:"",email:"",role:"Farmer"}),[P,V]=(0,r.useState)("IN"),[_,Z]=(0,r.useState)("INR"),[G,q]=(0,r.useState)(null),[L,Y]=(0,r.useState)(!1),W=e=>{M({...e}),J(!0)},$=async()=>{if(S){if(!S.name||!S.username||!S.email)return void e({variant:"destructive",title:"Missing Information",description:"Please fill out all fields."});h(a.map(e=>e.id===S.id?S:e),!1),J(!1),M(null),e({title:"User Updated",description:"The user's information has been saved."})}},K=(e,a)=>{S&&M({...S,[e]:a})},X=(e,a)=>{O({...B,[e]:a})},Q=async()=>{if(!B.name||!B.email||!B.username)return void e({variant:"destructive",title:"Missing Information",description:"Please fill out all fields to invite a new user."});let s={...B,id:Math.max(0,...a.map(e=>e.id))+1,avatarId:"avatar-".concat(a.length%3+1)};h([...a,s],!1),I(!1),e({title:"Invitation Sent",description:"".concat(B.name," has been invited to join the team.")})},ee=async()=>{try{let a=await fetch("/api/backup");if(!a.ok)throw Error("Failed to fetch backup data.");let s=await a.blob(),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t;let l=a.headers.get("content-disposition"),n="farmflow-backup-".concat((0,C.GP)(new Date,"yyyy-MM-dd"),".json");if(l){let e=l.match(/filename="?(.+)"?/);e&&e.length>1&&(n=e[1])}r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),F(),e({title:"Backup Successful",description:"All your farm data has been downloaded."})}catch(a){console.error("Backup failed:",a),e({variant:"destructive",title:"Backup Failed",description:"There was a problem downloading your data."})}},ea=async()=>{if(!G)return void e({variant:"destructive",title:"No File Selected",description:"Please select a backup file to restore."});Y(!0);let a=new FormData;a.append("backup",G);try{let s=await fetch("/api/restore",{method:"POST",body:a});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to restore data.")}e({title:"Restore Successful",description:"All data has been restored from the backup file. The page will now reload."}),setTimeout(()=>window.location.reload(),2e3)}catch(a){console.error("Restore failed:",a),e({variant:"destructive",title:"Restore Failed",description:a.message||"There was a problem restoring your data."})}finally{Y(!1),q(null)}};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Settings"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage user accounts, API keys, and other application settings."})]})}),(0,t.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.ZB,{children:"User Management"}),(0,t.jsx)(l.BT,{children:"A list of all users on the FarmFlow account."})]}),(0,t.jsxs)(d.$,{onClick:()=>{O({name:"",username:"",email:"",role:"Farmer"}),I(!0)},className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),(0,t.jsx)(l.Wu,{children:s?(0,t.jsx)("p",{children:"Failed to load users."}):(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"User"}),(0,t.jsx)(n.nd,{children:"Role"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(n.BF,{children:a.map(e=>{let a=ep(e.avatarId);return(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nA,{children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(c.eu,{children:[a&&(0,t.jsx)(c.BK,{src:a.imageUrl,alt:a.description,"data-ai-hint":a.imageHint}),(0,t.jsx)(c.q5,{children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[e.name," ",(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(@",e.username,")"]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})]})}),(0,t.jsx)(n.nA,{children:(0,t.jsx)(i.E,{variant:"Admin"===e.role?"destructive":"secondary",className:"Admin"===e.role?"bg-accent text-accent-foreground":"",children:e.role})}),(0,t.jsx)(n.nA,{className:"text-right",children:(0,t.jsxs)(o.rI,{children:[(0,t.jsx)(o.ty,{asChild:!0,children:(0,t.jsx)(d.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(p,{className:"h-4 w-4"})})}),(0,t.jsxs)(o.SQ,{align:"end",children:[(0,t.jsx)(o._2,{onClick:()=>W(e),children:"Edit"}),(0,t.jsx)(o._2,{children:"Change Role"}),(0,t.jsx)(o._2,{className:"text-destructive focus:text-destructive",children:"Remove"})]})]})})]},e.id)})})]})})]}),(0,t.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Data Management"}),(0,t.jsx)(l.BT,{children:"Backup all application data or restore from a previous backup file."})]}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-medium mb-2",children:"Backup"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Download a single JSON file containing all your farm data, including livestock, crops, finances, and more."}),(0,t.jsxs)(d.$,{onClick:ee,children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Backup All Data"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-medium mb-2",children:"Restore"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["Restore all application data from a previously downloaded backup file. ",(0,t.jsx)("strong",{className:"text-destructive",children:"Warning:"})," This will overwrite all current data."]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(N.p,{id:"backup-file",type:"file",accept:".json",onChange:e=>{e.target.files&&e.target.files.length>0&&q(e.target.files[0])},className:"max-w-xs"}),(0,t.jsxs)(z,{children:[(0,t.jsx)(T,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"destructive",disabled:!G||L,children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),L?"Restoring...":"Restore Data"]})}),(0,t.jsxs)(er,{children:[(0,t.jsxs)(el,{children:[(0,t.jsx)(ei,{children:"Are you absolutely sure?"}),(0,t.jsx)(ed,{children:"This action is irreversible. Restoring from a backup will permanently delete all current data and replace it with the contents of the backup file."})]}),(0,t.jsxs)(en,{children:[(0,t.jsx)(ec,{children:"Cancel"}),(0,t.jsx)(eo,{onClick:ea,children:"Yes, Restore Data"})]})]})]})]})]}),(0,t.jsx)(em.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-medium mb-2",children:"Backup History"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"A log of all recent data backups."}),(0,t.jsx)("div",{className:"border rounded-md",children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"Date"}),(0,t.jsx)(n.nd,{children:"User"}),(0,t.jsx)(n.nd,{children:"File Name"})]})}),(0,t.jsxs)(n.BF,{children:[H&&(0,t.jsx)(n.Hj,{children:(0,t.jsx)(n.nA,{colSpan:3,children:"Error loading history."})}),v.length>0?v.slice(0,5).map(e=>(0,t.jsxs)(n.Hj,{children:[(0,t.jsxs)(n.nA,{children:[(0,t.jsx)("div",{children:(0,C.GP)(new Date(e.timestamp),"PPpp")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,D.m)(new Date(e.timestamp),{addSuffix:!0})})]}),(0,t.jsx)(n.nA,{children:e.user}),(0,t.jsx)(n.nA,{className:"font-mono text-xs",children:e.fileName})]},e.id)):(0,t.jsx)(n.Hj,{children:(0,t.jsx)(n.nA,{colSpan:3,className:"text-center",children:"No backup history found."})})]})]})})]})]})]}),(0,t.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Regional Settings"}),(0,t.jsx)(l.BT,{children:"Set your farm's location and currency for accurate tracking."})]}),(0,t.jsxs)(l.Wu,{className:"grid sm:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"country",children:"Country"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)(A.l6,{value:P,onValueChange:V,children:[(0,t.jsx)(A.bq,{id:"country",children:(0,t.jsx)(A.yv,{placeholder:"Select a country"})}),(0,t.jsx)(A.gC,{children:eu.map(e=>(0,t.jsx)(A.eb,{value:e.code,children:e.name},e.code))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"currency",children:"Currency"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)(A.l6,{value:_,onValueChange:Z,children:[(0,t.jsx)(A.bq,{id:"currency",children:(0,t.jsx)(A.yv,{placeholder:"Select a currency"})}),(0,t.jsx)(A.gC,{children:ex.map(e=>(0,t.jsx)(A.eb,{value:e.code,children:e.name},e.code))})]})]})]})]}),(0,t.jsx)(l.wL,{children:(0,t.jsx)(d.$,{onClick:()=>{var a,s;e({title:"Settings Saved",description:"Country set to ".concat(null==(a=eu.find(e=>e.code===P))?void 0:a.name," and currency set to ").concat(null==(s=ex.find(e=>e.code===_))?void 0:s.name,".")})},className:"ml-auto bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Regional Settings"})})]}),(0,t.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"API Key Management"}),(0,t.jsx)(l.BT,{children:"Manage API keys for third-party AI and video streaming services."})]}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"gemini-key",children:"Google Gemini API Key"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)(N.p,{id:"gemini-key",type:"password",placeholder:"Enter your Gemini API Key",defaultValue:"************"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"openai-key",children:"OpenAI API Key"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)(N.p,{id:"openai-key",type:"password",placeholder:"Enter your OpenAI API Key"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"video-key",children:"Video Streaming API Key"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)(N.p,{id:"video-key",type:"password",placeholder:"Enter your Video Streaming API Key"})]})]})]}),(0,t.jsx)(l.wL,{children:(0,t.jsx)(d.$,{className:"ml-auto bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save API Keys"})})]}),S&&(0,t.jsx)(w.lG,{open:E,onOpenChange:J,children:(0,t.jsxs)(w.Cf,{children:[(0,t.jsxs)(w.c7,{children:[(0,t.jsx)(w.L3,{children:"Edit User"}),(0,t.jsx)(w.rr,{children:"Modify the user's details below and click save."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"name",className:"text-right",children:"Name"}),(0,t.jsx)(N.p,{id:"name",value:S.name,onChange:e=>K("name",e.target.value),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"username",className:"text-right",children:"Username"}),(0,t.jsx)(N.p,{id:"username",value:S.username,onChange:e=>K("username",e.target.value),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"email",className:"text-right",children:"Email"}),(0,t.jsx)(N.p,{id:"email",type:"email",value:S.email,onChange:e=>K("email",e.target.value),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"role",className:"text-right",children:"Role"}),(0,t.jsxs)(A.l6,{value:S.role,onValueChange:e=>K("role",e),children:[(0,t.jsx)(A.bq,{className:"col-span-3",children:(0,t.jsx)(A.yv,{placeholder:"Select a role"})}),(0,t.jsxs)(A.gC,{children:[(0,t.jsx)(A.eb,{value:"Admin",children:"Admin"}),(0,t.jsx)(A.eb,{value:"Manager",children:"Manager"}),(0,t.jsx)(A.eb,{value:"Farmer",children:"Farmer"})]})]})]})]}),(0,t.jsxs)(w.Es,{children:[(0,t.jsx)(d.$,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),(0,t.jsx)(d.$,{onClick:$,children:"Save Changes"})]})]})}),(0,t.jsx)(w.lG,{open:U,onOpenChange:I,children:(0,t.jsxs)(w.Cf,{children:[(0,t.jsxs)(w.c7,{children:[(0,t.jsx)(w.L3,{children:"Invite a New User"}),(0,t.jsx)(w.rr,{children:"Enter the new user's details to send an invitation."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"new-name",className:"text-right",children:"Name"}),(0,t.jsx)(N.p,{id:"new-name",value:B.name,onChange:e=>X("name",e.target.value),className:"col-span-3",placeholder:"John Doe"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"new-username",className:"text-right",children:"Username"}),(0,t.jsx)(N.p,{id:"new-username",value:B.username,onChange:e=>X("username",e.target.value),className:"col-span-3",placeholder:"johndoe"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"new-email",className:"text-right",children:"Email"}),(0,t.jsx)(N.p,{id:"new-email",type:"email",value:B.email,onChange:e=>X("email",e.target.value),className:"col-span-3",placeholder:"john.doe@example.com"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b.J,{htmlFor:"new-role",className:"text-right",children:"Role"}),(0,t.jsxs)(A.l6,{value:B.role,onValueChange:e=>X("role",e),children:[(0,t.jsx)(A.bq,{className:"col-span-3",children:(0,t.jsx)(A.yv,{placeholder:"Select a role"})}),(0,t.jsxs)(A.gC,{children:[(0,t.jsx)(A.eb,{value:"Admin",children:"Admin"}),(0,t.jsx)(A.eb,{value:"Manager",children:"Manager"}),(0,t.jsx)(A.eb,{value:"Farmer",children:"Farmer"})]})]})]})]}),(0,t.jsxs)(w.Es,{children:[(0,t.jsx)(d.$,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,t.jsx)(d.$,{onClick:Q,children:"Send Invitation"})]})]})})]})}},88390:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},91394:(e,a,s)=>{"use strict";s.d(a,{BK:()=>d,eu:()=>i,q5:()=>o});var t=s(95155),r=s(12115),l=s(85977),n=s(59434);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.bL,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});i.displayName=l.bL.displayName;let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l._V,{ref:a,className:(0,n.cn)("aspect-square h-full w-full",s),...r})});d.displayName=l._V.displayName;let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.H4,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});o.displayName=l.H4.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[5511,9667,4953,7239,7582,106,3013,2043,6863,76,5796,223,8441,1684,7358],()=>a(40448)),_N_E=e.O()}]);