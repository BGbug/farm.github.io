(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2031],{254:e=>{"use strict";e.exports=require("genkit")},14636:(e,s,t)=>{"use strict";t.d(s,{AM:()=>d,Wv:()=>l,hl:()=>c});var a=t(95155),r=t(12115),n=t(98176),i=t(59434);let d=n.bL,l=n.l9,c=r.forwardRef((e,s)=>{let{className:t,align:r="center",sideOffset:d=4,...l}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:s,align:r,sideOffset:d,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});c.displayName=n.UC.displayName},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>l});var a=t(95155),r=t(12115),n=t(66634),i=t(74466),d=t(59434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:c=!1,...o}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,d.cn)(l({variant:r,size:i,className:t})),ref:s,...o})});c.displayName="Button"},45686:(e,s,t)=>{Promise.resolve().then(t.bind(t,98991))},55365:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>l,TN:()=>o,XL:()=>c});var a=t(95155),r=t(12115),n=t(74466),i=t(59434);let d=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,s)=>{let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(d({variant:r}),t),...n})});l.displayName="Alert";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})});c.displayName="AlertTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...r})});o.displayName="AlertDescription"},59409:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>p,gC:()=>g,l6:()=>o,yv:()=>u});var a=t(95155),r=t(12115),n=t(11031),i=t(79556),d=t(77381),l=t(10518),c=t(59434);let o=n.bL;n.YJ;let u=n.WT,m=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(n.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...d,children:[r,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=n.PP.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=n.wn.displayName;let g=r.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...d}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...d,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(f,{})]})})});g.displayName=n.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=n.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(n.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:r})]})});p.displayName=n.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=n.wv.displayName},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(52596),r=t(39688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(95155),r=t(12115),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},63154:(e,s,t)=>{"use strict";t.d(s,{ai:()=>n});var a=t(254);let r=require("@genkit-ai/google-genai"),n=(0,a.genkit)({plugins:[(0,r.googleAI)()],model:"google-genai/gemini-1.5-flash"})},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>l,Zp:()=>i,aR:()=>d,wL:()=>u});var a=t(95155),r=t(12115),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},85057:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(95155),r=t(12115),n=t(40968),i=t(74466),d=t(59434);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.b,{ref:s,className:(0,d.cn)(l(),t),...r})});c.displayName=n.b.displayName},85511:(e,s,t)=>{"use strict";t.d(s,{V:()=>c});var a=t(95155);t(12115);var r=t(965),n=t(73158),i=t(62693),d=t(59434),l=t(30285);function c(e){let{className:s,classNames:t,showOutsideDays:c=!0,...o}=e;return(0,a.jsx)(i.hv,{showOutsideDays:c,className:(0,d.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,l.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:s,...t}=e;return(0,a.jsx)(r.A,{className:(0,d.cn)("h-4 w-4",s),...t})},IconRight:e=>{let{className:s,...t}=e;return(0,a.jsx)(n.A,{className:(0,d.cn)("h-4 w-4",s),...t})}},...o})}c.displayName="Calendar"},87481:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var a=t(12115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},d=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},l=[],c={toasts:[]};function o(e){c=d(c,e),l.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(95155),r=t(12115),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});i.displayName="Textarea"},98991:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>X});var a=t(95155),r=t(12115),n=t(60704),i=t(59434);let d=n.bL,l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});l.displayName=n.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});c.displayName=n.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});o.displayName=n.UC.displayName;var u=t(66695),m=t(30285),h=t(62523),f=t(85057),g=t(59409),p=t(34301),x=t(47650),v=t(63154),j=t(254);let b=j.z.object({farmId:j.z.string().describe("The ID of the farm to analyze."),startDate:j.z.string().describe("The start date for the analysis period (YYYY-MM-DD)."),endDate:j.z.string().describe("The end date for the analysis period (YYYY-MM-DD).")}),y=j.z.object({insights:j.z.string().describe("Insights on optimizing resource usage, including specific recommendations."),overallAssessment:j.z.string().describe("Overall assessment of resource management practices.")});async function N(e){return S(e)}let w=v.ai.definePrompt({name:"analyzeResourceUsagePrompt",input:{schema:b},output:{schema:y},prompt:"You are an expert in agricultural resource management. Analyze the historical resource consumption patterns (fertilizer, water) for the given farm and provide insights on optimizing usage to reduce waste and improve efficiency.\n\nFarm ID: {{{farmId}}}\nStart Date: {{{startDate}}}\nEnd Date: {{{endDate}}}\n\nProvide specific, actionable recommendations based on the data provided. Also, provide an overall assessment of the farm's current resource management practices.\n\nFormat your response with an overallAssessment and insights paragraph.\n"}),S=v.ai.defineFlow({name:"analyzeResourceUsageFlow",inputSchema:b,outputSchema:y},async e=>{let{output:s}=await w(e);return s});var R=t(14636),A=t(85511),T=t(51920),F=t(50172),k=t(17832),D=t(83013),z=t(55365);let _={insights:"",overallAssessment:""};function C(){let[e,s]=(0,x.useFormState)(N,_),[t,n]=(0,r.useState)(new Date(new Date().setMonth(new Date().getMonth()-3))),[d,l]=(0,r.useState)(new Date),[c,o]=(0,r.useState)(!1),g=async e=>{e.preventDefault(),o(!0);let a=new FormData(e.currentTarget);t&&a.set("startDate",(0,D.GP)(t,"yyyy-MM-dd")),d&&a.set("endDate",(0,D.GP)(d,"yyyy-MM-dd")),await s(a),o(!1)};return(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 items-start",children:[(0,a.jsx)("form",{onSubmit:g,children:(0,a.jsxs)(u.Zp,{className:"shadow-md",children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Generate Usage Insights"}),(0,a.jsx)(u.BT,{children:"Select a date range to analyze resource consumption patterns and get AI-powered recommendations."})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"farmId",children:"Farm ID"}),(0,a.jsx)(h.p,{id:"farmId",name:"farmId",defaultValue:"FARM-001",placeholder:"Enter Farm ID"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Start Date"}),(0,a.jsxs)(R.AM,{children:[(0,a.jsx)(R.Wv,{asChild:!0,children:(0,a.jsxs)(m.$,{variant:"outline",className:(0,i.cn)("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,a.jsx)(T.A,{className:"mr-2 h-4 w-4"}),t?(0,D.GP)(t,"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(R.hl,{className:"w-auto p-0",children:(0,a.jsx)(A.V,{mode:"single",selected:t,onSelect:n,initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"End Date"}),(0,a.jsxs)(R.AM,{children:[(0,a.jsx)(R.Wv,{asChild:!0,children:(0,a.jsxs)(m.$,{variant:"outline",className:(0,i.cn)("w-full justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[(0,a.jsx)(T.A,{className:"mr-2 h-4 w-4"}),d?(0,D.GP)(d,"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(R.hl,{className:"w-auto p-0",children:(0,a.jsx)(A.V,{mode:"single",selected:d,onSelect:l,initialFocus:!0})})]})]})]})]}),(0,a.jsx)(u.wL,{children:(0,a.jsxs)(m.$,{type:"submit",disabled:c,className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",children:[c?(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Generate Insights"]})})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(u.Zp,{className:"shadow-md animate-pulse",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)("div",{className:"h-6 bg-muted rounded w-3/4"})}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-full mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-5/6"})]})]}),(0,a.jsxs)(u.Zp,{className:"shadow-md animate-pulse",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)("div",{className:"h-6 bg-muted rounded w-1/2"})}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-full mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-full mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"})]})]})]}),"error"in e&&e.error&&(0,a.jsxs)(z.Fc,{variant:"destructive",children:[(0,a.jsx)(z.XL,{children:"Error"}),(0,a.jsx)(z.TN,{children:e.error})]}),"insights"in e&&e.insights&&!c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(u.Zp,{className:"shadow-md bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{className:"text-green-800 dark:text-green-200",children:"Overall Assessment"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("p",{className:"text-green-700 dark:text-green-300",children:e.overallAssessment})})]}),(0,a.jsxs)(u.Zp,{className:"shadow-md",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Optimization Insights"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.insights})})]})]})]})]})}let I=j.z.object({currentResourceUsage:j.z.string().describe("The current resource usage, including fertilizer, water, etc."),plannedActivities:j.z.string().describe("The planned activities, including planting, harvesting, etc."),budget:j.z.number().describe("The allotted budget for the farm.")}),P=j.z.object({forecastedSpending:j.z.number().describe("The forecasted spending based on current resource usage and planned activities."),isWithinBudget:j.z.boolean().describe("Whether the forecasted spending is within the allotted budget."),recommendations:j.z.string().describe("Recommendations for adjusting resource usage or planned activities to stay within budget.")});async function B(e){return O(e)}let W=v.ai.definePrompt({name:"spendingForecastPrompt",input:{schema:I},output:{schema:P},prompt:"You are an expert farm financial advisor. Based on the current resource usage, planned activities, and allotted budget, you will forecast spending and provide recommendations.\n\nCurrent Resource Usage: {{{currentResourceUsage}}}\nPlanned Activities: {{{plannedActivities}}}\nBudget: {{{budget}}}\n\nForecasted Spending: \nIs Within Budget: \nRecommendations: "}),O=v.ai.defineFlow({name:"spendingForecastFlow",inputSchema:I,outputSchema:P},async e=>{let{output:s}=await W(e);return s});var U=t(88539),E=t(80659),M=t(58127),L=t(11133);let Z={forecastedSpending:0,isWithinBudget:!1,recommendations:""};function J(){let[e,s]=(0,x.useFormState)(B,Z),[t,n]=(0,r.useState)(!1),i=async e=>{e.preventDefault(),n(!0);let t=new FormData(e.currentTarget);await s(t),n(!1)};return(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 items-start",children:[(0,a.jsx)("form",{onSubmit:i,children:(0,a.jsxs)(u.Zp,{className:"shadow-md",children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Generate Spending Forecast"}),(0,a.jsx)(u.BT,{children:"Forecast future spending based on planned activities and get budget recommendations."})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"currentResourceUsage",children:"Current Resource Usage"}),(0,a.jsx)(U.T,{id:"currentResourceUsage",name:"currentResourceUsage",placeholder:"e.g., 5 tons of fertilizer, 10,000 m\xb3 of water per month",defaultValue:"5 tons of NPK 10-10-10 fertilizer, 10,000 m\xb3 of water per month."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"plannedActivities",children:"Planned Activities"}),(0,a.jsx)(U.T,{id:"plannedActivities",name:"plannedActivities",placeholder:"e.g., Planting 50 acres of corn, purchasing new tractor part",defaultValue:"Planting 50 acres of corn in North Paddock, purchasing new irrigation pump."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"budget",children:"Allotted Budget (₹)"}),(0,a.jsx)(h.p,{id:"budget",name:"budget",type:"number",placeholder:"e.g., 100000",defaultValue:"100000"})]})]}),(0,a.jsx)(u.wL,{children:(0,a.jsxs)(m.$,{type:"submit",disabled:t,className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",children:[t?(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(E.A,{className:"mr-2 h-4 w-4"}),"Get Forecast"]})})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[t&&(0,a.jsxs)(u.Zp,{className:"shadow-md animate-pulse",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)("div",{className:"h-6 bg-muted rounded w-3/4"})}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-full"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-full"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-5/6"})]})]}),"error"in e&&e.error&&(0,a.jsxs)(z.Fc,{variant:"destructive",children:[(0,a.jsx)(z.XL,{children:"Error"}),(0,a.jsx)(z.TN,{children:e.error})]}),"recommendations"in e&&e.recommendations&&!t&&(0,a.jsxs)(u.Zp,{className:"shadow-md",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Forecast Results"})}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Forecasted Spending"}),(0,a.jsxs)("span",{className:"text-2xl font-bold",children:["₹",e.forecastedSpending.toLocaleString()]})]}),(0,a.jsxs)(z.Fc,{variant:e.isWithinBudget?"default":"destructive",className:e.isWithinBudget?"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800 text-green-800 dark:text-green-200":"",children:[e.isWithinBudget?(0,a.jsx)(M.A,{className:"h-4 w-4"}):(0,a.jsx)(L.A,{className:"h-4 w-4"}),(0,a.jsx)(z.XL,{children:e.isWithinBudget?"Within Budget":"Over Budget"}),(0,a.jsxs)(z.TN,{className:e.isWithinBudget?"text-green-700 dark:text-green-300":"",children:["The forecasted spending is ",e.isWithinBudget?"within":"over"," the allotted budget."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Recommendations"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.recommendations})]})]})]})]})]})}var q=t(87481),V=t(19667),Y=t(34953);let G=e=>fetch(e).then(e=>e.json()),$=["Cow","Buffalo","Goat","Chicken","Sheep"];function X(){let{toast:e}=(0,q.dj)(),{data:s=[],error:t,isLoading:n}=(0,Y.Ay)("/api/fields",G),[i,x]=(0,r.useState)(""),v=async s=>{s.preventDefault();let t=new FormData(s.currentTarget),a=t.get("resource-type"),r=t.get("quantity"),n=t.get("cost"),i=t.get("usage-for"),d=t.get("field-select"),l=t.get("livestock-select");if(!a||!r||!n)return void e({variant:"destructive",title:"Missing Information",description:"Please fill out Resource Type, Quantity and Cost."});let c="Used ".concat(r," of ").concat(a);"field"===i&&d?c+=" on ".concat(d):"livestock"===i&&l&&(c+=" for ".concat(l));let o={category:a,amount:Number(n),date:new Date().toISOString(),description:c,type:"expense"};try{await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),(0,V.j)("/api/transactions"),e({title:"Resource Logged & Expense Recorded",description:"An expense of ₹".concat(n," for ").concat(a," has been logged.")}),s.target.reset(),x("")}catch(s){console.error("Error adding transaction: ",s),e({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Could not save the resource log as an expense."})}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Resource Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track resource usage and leverage AI for optimization and forecasting."})]}),(0,a.jsxs)(d,{defaultValue:"insights",className:"space-y-4",children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{value:"insights",children:"Usage Insights"}),(0,a.jsx)(c,{value:"forecast",children:"Spending Forecast"}),(0,a.jsx)(c,{value:"log",children:"Log Resources"})]}),(0,a.jsx)(o,{value:"insights",className:"space-y-4",children:(0,a.jsx)(C,{})}),(0,a.jsx)(o,{value:"forecast",className:"space-y-4",children:(0,a.jsx)(J,{})}),(0,a.jsx)(o,{value:"log",className:"space-y-4",children:(0,a.jsxs)(u.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Log Resource Consumption"}),(0,a.jsx)(u.BT,{children:"Enter details about the resources used. This will create an expense entry in your finances."})]}),(0,a.jsx)(u.Wu,{className:"space-y-6",children:(0,a.jsxs)("form",{onSubmit:v,className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 items-end",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"resource-type",children:"Resource Type"}),(0,a.jsxs)(g.l6,{name:"resource-type",children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select resource"})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"Fertilizers",children:"Fertilizer"}),(0,a.jsx)(g.eb,{value:"Seeds",children:"Seeds"}),(0,a.jsx)(g.eb,{value:"Feeds",children:"Feeds"}),(0,a.jsx)(g.eb,{value:"Water",children:"Water"}),(0,a.jsx)(g.eb,{value:"Pesticide",children:"Pesticide"}),(0,a.jsx)(g.eb,{value:"Fuel",children:"Fuel"}),(0,a.jsx)(g.eb,{value:"Other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"usage-for",children:"Usage For"}),(0,a.jsxs)(g.l6,{name:"usage-for",onValueChange:e=>x(e),children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select target"})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"field",children:"Field / Crops"}),(0,a.jsx)(g.eb,{value:"livestock",children:"Livestock"})]})]})]}),"field"===i&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"field-select",children:"Field"}),(0,a.jsxs)(g.l6,{name:"field-select",children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select a field"})}),(0,a.jsx)(g.gC,{children:n?(0,a.jsx)(g.eb,{value:"loading",disabled:!0,children:"Loading..."}):s.map(e=>(0,a.jsx)(g.eb,{value:e.name,children:e.name},e.id))})]})]}),"livestock"===i&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"livestock-select",children:"Livestock Type"}),(0,a.jsxs)(g.l6,{name:"livestock-select",children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select animal type"})}),(0,a.jsx)(g.gC,{children:$.map(e=>(0,a.jsx)(g.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"quantity",children:"Quantity"}),(0,a.jsx)(h.p,{id:"quantity",name:"quantity",type:"number",placeholder:"e.g., 50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"unit",children:"Unit"}),(0,a.jsxs)(g.l6,{name:"unit",children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select unit"})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"kg",children:"kg"}),(0,a.jsx)(g.eb,{value:"ton",children:"ton"}),(0,a.jsx)(g.eb,{value:"liter",children:"liter"}),(0,a.jsx)(g.eb,{value:"gallons",children:"gallons"}),(0,a.jsx)(g.eb,{value:"m3",children:"m\xb3 (cubic meter)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cost",children:"Total Cost (₹)"}),(0,a.jsx)(h.p,{id:"cost",name:"cost",type:"number",placeholder:"e.g., 250.00"})]}),(0,a.jsxs)(m.$,{type:"submit",className:"w-full xl:w-auto bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Log Entry"]})]})})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[5511,9667,4953,7239,7582,106,3013,2043,9244,4167,8441,1684,7358],()=>s(45686)),_N_E=e.O()}]);