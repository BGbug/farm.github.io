(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8137],{14636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>i,Wv:()=>l,hl:()=>o});var r=a(95155),n=a(12115),s=a(98176),d=a(59434);let i=s.bL,l=s.l9,o=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:i=4,...l}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{ref:t,align:n,sideOffset:i,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});o.displayName=s.UC.displayName},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(95155);a(12115);var n=a(74466),s=a(59434);let d=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)(d({variant:a}),t),...n})}},53444:(e,t,a)=>{Promise.resolve().then(a.bind(a,65095))},65095:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(95155),n=a(12115),s=a(66695),d=a(85127),i=a(26126),l=a(30285),o=a(34301),c=a(54165),m=a(62523),p=a(85057),h=a(59409),u=a(14636),x=a(85511),f=a(51920),g=a(59434),y=a(83013),j=a(70831),v=a(87481),b=a(34953),N=a(19667);let w=e=>fetch(e).then(e=>e.json());function C(){let{toast:e}=(0,v.dj)(),[t,a]=(0,n.useState)(!1),[C,O]=(0,n.useState)({name:"",field:"",plantedOn:new Date().toISOString().split("T")[0]}),{data:P=[],error:_,isLoading:A}=(0,b.Ay)("/api/crops",w),{data:M=[],error:S,isLoading:D}=(0,b.Ay)("/api/fields",w),F=(e,t)=>{let a=t;t instanceof Date&&(a=(0,y.GP)(t,"yyyy-MM-dd")),O(t=>({...t,[e]:a}))},L=async()=>{if(!C.name||!C.field||!C.plantedOn)return void e({variant:"destructive",title:"Missing Information",description:"Please fill out all crop details."});let t=new Date(C.plantedOn),r={...{name:C.name,field:C.field,plantedOn:(0,y.GP)(t,"yyyy-MM-dd"),expectedHarvest:(0,y.GP)((0,j.f)(t,120),"yyyy-MM-dd"),status:"Planted"},id:"CROP-".concat(Date.now())};try{await fetch("/api/crops",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),(0,N.j)("/api/crops"),a(!1),O({name:"",field:"",plantedOn:new Date().toISOString().split("T")[0]}),e({title:"Crop Added",description:"".concat(C.name," has been added to your crop log.")})}catch(t){console.error(t),e({variant:"destructive",title:"Error",description:"Failed to add crop."})}};return _||S?(0,r.jsx)("div",{children:"Failed to load data"}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Crop Management"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage your crop cycles from planting to harvest."})]}),(0,r.jsxs)(l.$,{onClick:()=>a(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Add New Crop"]})]}),(0,r.jsxs)(s.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsx)(s.ZB,{children:"Crop Overview"}),(0,r.jsx)(s.BT,{children:"A summary of all active and past crop cycles on your farm."})]}),(0,r.jsx)(s.Wu,{children:A?(0,r.jsx)("p",{children:"Loading crops..."}):(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.A0,{children:(0,r.jsxs)(d.Hj,{children:[(0,r.jsx)(d.nd,{children:"Crop"}),(0,r.jsx)(d.nd,{children:"Field"}),(0,r.jsx)(d.nd,{children:"Planted On"}),(0,r.jsx)(d.nd,{children:"Expected Harvest"}),(0,r.jsx)(d.nd,{className:"text-right",children:"Status"})]})}),(0,r.jsx)(d.BF,{children:P.map(e=>(0,r.jsxs)(d.Hj,{children:[(0,r.jsx)(d.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(d.nA,{className:"text-muted-foreground",children:e.field}),(0,r.jsx)(d.nA,{children:(0,y.GP)(new Date(e.plantedOn),"PPP")}),(0,r.jsx)(d.nA,{children:(0,y.GP)(new Date(e.expectedHarvest),"PPP")}),(0,r.jsx)(d.nA,{className:"text-right",children:(0,r.jsx)(i.E,{variant:"Harvested"===e.status?"default":"outline",className:"Harvested"===e.status?"bg-primary/80 text-primary-foreground":"Growing"===e.status?"border-green-500/50 text-green-600":"",children:e.status})})]},e.id))})]})})]}),(0,r.jsx)(c.lG,{open:t,onOpenChange:a,children:(0,r.jsxs)(c.Cf,{children:[(0,r.jsxs)(c.c7,{children:[(0,r.jsx)(c.L3,{children:"Add New Crop"}),(0,r.jsx)(c.rr,{children:"Log a new crop cycle. The expected harvest date will be estimated."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(p.J,{htmlFor:"crop-name",className:"text-right",children:"Crop Name"}),(0,r.jsx)(m.p,{id:"crop-name",value:C.name,onChange:e=>F("name",e.target.value),className:"col-span-3",placeholder:"e.g., Corn"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(p.J,{htmlFor:"field",className:"text-right",children:"Field"}),(0,r.jsxs)(h.l6,{value:C.field,onValueChange:e=>F("field",e),children:[(0,r.jsx)(h.bq,{className:"col-span-3",children:(0,r.jsx)(h.yv,{placeholder:"Select a field"})}),(0,r.jsxs)(h.gC,{children:[D&&(0,r.jsx)(h.eb,{value:"loading",disabled:!0,children:"Loading fields..."}),M.map(e=>(0,r.jsx)(h.eb,{value:e.name,children:e.name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(p.J,{htmlFor:"plantedOn",className:"text-right",children:"Planted On"}),(0,r.jsxs)(u.AM,{children:[(0,r.jsx)(u.Wv,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"outline",className:(0,g.cn)("col-span-3 justify-start text-left font-normal",!C.plantedOn&&"text-muted-foreground"),children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"}),C.plantedOn?(0,y.GP)(new Date(C.plantedOn),"PPP"):(0,r.jsx)("span",{children:"Pick a date"})]})}),(0,r.jsx)(u.hl,{className:"w-auto p-0",children:(0,r.jsx)(x.V,{mode:"single",selected:C.plantedOn?new Date(C.plantedOn):void 0,onSelect:e=>F("plantedOn",e),initialFocus:!0})})]})]})]}),(0,r.jsxs)(c.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,r.jsx)(l.$,{onClick:L,children:"Add Crop"})]})]})})]})}},85511:(e,t,a)=>{"use strict";a.d(t,{V:()=>o});var r=a(95155);a(12115);var n=a(965),s=a(73158),d=a(62693),i=a(59434),l=a(30285);function o(e){let{className:t,classNames:a,showOutsideDays:o=!0,...c}=e;return(0,r.jsx)(d.hv,{showOutsideDays:o,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,l.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(s.A,{className:(0,i.cn)("h-4 w-4",t),...a})}},...c})}o.displayName="Calendar"}},e=>{var t=t=>e(e.s=t);e.O(0,[5511,9667,4953,7239,7582,106,3013,2043,9244,6863,223,8441,1684,7358],()=>t(53444)),_N_E=e.O()}]);